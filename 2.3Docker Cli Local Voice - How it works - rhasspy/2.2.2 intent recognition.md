# intent recognition

home_assistant_conversation

does intent recognition on a home assistant server.

After your voice command has been transcribed by the speech to text system, this step is to recognize your intent. 

The end result is a JSON event with information about the intent.

Inputs text
Outputs an intent with a name and entities (slots)

## Assist is very slow

Assist is very slow when I input sentences that don't match an intent (e.g. the STT didn't transcribe correctly or I spoke an incorrect command). I

There are 3 stages to intent matching, each slower than the last.
In stage 1, intents are matched strictly against the exposed entities list. This is usually quick because there are far fewer exposed entities.
If stage 1 fails, stage 2 attempts to match strictly against all entities in HA. This is so we can understand if you're trying to do something with an entity that isn't exposed.
If stage 2 fails, stage 3 runs the intent matcher in a fuzzy mode. This allows it to parse sentences like "turn on blah in the kitchen" as a HassTurnOn intent with name=blah (not a real entity) and area=kitchen (real area). With this information, we can provide a useful error message like "No device named blah".


events generated by intent
They appear in the debug log:
~~~
events:
  - type: run-start
    data:
      pipeline: 01h0amejr3nf5059gavrx5jm7g
      language: en
      runner_data:
        stt_binary_handler_id: null
        timeout: 300
    timestamp: "2025-02-01T21:00:20.647661+00:00"
  - type: intent-start
    data:
      engine: conversation.home_assistant
      language: en
      intent_input: Babble Babble
      conversation_id: null
      device_id: null
      prefer_local_intents: false
    timestamp: "2025-02-01T21:00:20.647697+00:00"
  - type: intent-end
    data:
      processed_locally: true
      intent_output:
        response:
          speech:
            plain:
              speech: Sorry, I couldn't understand that
              extra_data: null
          card: {}
          language: en
          response_type: error
          data:
            code: no_intent_match
        conversation_id: null
    timestamp: "2025-02-01T21:00:20.693508+00:00"
  - type: run-end
    data: null
    timestamp: "2025-02-01T21:00:20.693566+00:00"

~~~

https://community.home-assistant.io/t/can-we-make-use-of-events-generated-by-intent-errors/840011